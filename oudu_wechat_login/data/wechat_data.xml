<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data noupdate="1">
        <!-- 创建默认配置 -->
        <record id="default_wechat_config" model="wechat.sso.config">
            <field name="name">Default WeChat Configuration</field>
            <field name="app_id">your_app_id</field>
            <field name="app_secret">your_app_secret</field>
            <field name="redirect_uri">http://www.ningzhuhui.com/wechat/callback</field>
            <field name="auth_scope">snsapi_userinfo</field>
            <field name="auto_create_user">True</field>
            <field name="default_user_group" ref="base.group_portal"/>
        </record>
    </data>

    <data noupdate="0">
        <!-- 添加定时任务：每小时更新一次微信access_token -->
        <record id="ir_cron_update_wechat_access_token" model="ir.cron">
            <field name="name">WeChat: Update Access Token</field>
            <field name="model_id" ref="model_wechat_sso_config"/>
            <field name="state">code</field>
            <field name="code">model.cron_update_access_token()</field>
            <field name="user_id" ref="base.user_root" />
            <field name="interval_number">1</field>
            <field name="interval_type">hours</field>
            <field name="active" eval="True"/>
        </record>
    </data>
</odoo>