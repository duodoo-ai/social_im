<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Odooå¾®ä¿¡äºŒç»´ç ç™»å½•æ¨¡å— - å®Œæ•´è¯´æ˜</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        body {
            background-color: #f5f7f9;
            color: #333;
            line-height: 1.6;
            padding: 20px;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 10px;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }
        header {
            background: linear-gradient(135deg, #07C160 0%, #05a54e 100%);
            color: white;
            padding: 30px;
            text-align: center;
            position: relative;
        }
        header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }
        header p {
            font-size: 1.2rem;
            opacity: 0.9;
        }
        .logo {
            font-size: 3rem;
            margin-bottom: 20px;
        }
        .content {
            padding: 30px;
        }
        .section {
            margin-bottom: 40px;
            padding-bottom: 20px;
            border-bottom: 1px solid #eaeaea;
        }
        .section h2 {
            color: #07C160;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid #07C160;
            display: inline-block;
        }
        .section h3 {
            color: #333;
            margin: 15px 0 10px;
        }
        .features {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        .feature-card {
            background: #f9f9f9;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            transition: transform 0.3s ease;
        }
        .feature-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.1);
        }
        .feature-card h4 {
            color: #07C160;
            margin-bottom: 10px;
        }
        .code-block {
            background: #2d2d2d;
            color: #f8f8f2;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
            margin: 15px 0;
            font-family: 'Courier New', monospace;
        }
        .field-table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
        }
        .field-table th, .field-table td {
            border: 1px solid #ddd;
            padding: 10px;
            text-align: left;
        }
        .field-table th {
            background-color: #f2f2f2;
        }
        .field-table tr:nth-child(even) {
            background-color: #f9f9f9;
        }
        .endpoints {
            background: #e8f5e9;
            padding: 15px;
            border-radius: 5px;
            margin: 15px 0;
        }
        .endpoint {
            margin-bottom: 10px;
            padding-bottom: 10px;
            border-bottom: 1px dashed #c8e6c9;
        }
        .endpoint:last-child {
            border-bottom: none;
        }
        .endpoint-method {
            display: inline-block;
            background: #07C160;
            color: white;
            padding: 3px 8px;
            border-radius: 4px;
            font-size: 0.8rem;
            margin-right: 10px;
        }
        .author-info {
            background: #e3f2fd;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }
        footer {
            text-align: center;
            padding: 20px;
            background: #333;
            color: white;
            margin-top: 30px;
        }
        .image-gallery {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }
        .image-card {
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease;
        }
        .image-card:hover {
            transform: translateY(-5px);
        }
        .image-card img {
            width: 100%;
            height: auto;
            display: block;
        }
        .image-description {
            padding: 15px;
            background: white;
        }
        .image-description h4 {
            color: #07C160;
            margin-bottom: 10px;
        }
        .module-banner {
            width: 100%;
            max-height: 300px;
            object-fit: cover;
            margin-bottom: 20px;
            border-radius: 8px;
        }
        @media (max-width: 768px) {
            .features, .image-gallery {
                grid-template-columns: 1fr;
            }
            header h1 {
                font-size: 2rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="logo">ğŸ“±ğŸ”</div>
            <h1>Odooå¾®ä¿¡äºŒç»´ç æ‰«ç ç™»å½•æ¨¡å—</h1>
            <p><strong>é€šè¿‡å¾®ä¿¡æ‰«ç å®ç°Odooä¾¿æ·ç™»å½•çš„å®Œæ•´è§£å†³æ–¹æ¡ˆ</strong></p>
        </header>

        <div class="content">
            <div class="section">
                <h2>æ¨¡å—æ¦‚è¿°</h2>
                <p>æœ¬æ¨¡å—ä¸ºOdooç³»ç»Ÿæä¾›äº†åŸºäºå¾®ä¿¡äºŒç»´ç æ‰«æçš„ç™»å½•åŠŸèƒ½ã€‚ç”¨æˆ·å¯ä»¥é€šè¿‡æ‰«æå¾®ä¿¡äºŒç»´ç å¿«é€Ÿç™»å½•Odooç³»ç»Ÿï¼Œæ— éœ€è¾“å…¥è´¦å·å¯†ç ï¼Œæä¾›æ›´ä¾¿æ·çš„ç™»å½•ä½“éªŒã€‚</p>

                <div class="image-gallery">
                    <div class="image-card">
                        <div class="image-description">
                            <h4>æ¨¡å—å®£ä¼ å›¾</h4>
                            <p>ç®€æ´çš„è®¾è®¡å±•ç¤ºäº†å¾®ä¿¡äºŒç»´ç ç™»å½•çš„æ ¸å¿ƒåŠŸèƒ½</p>
                        </div>
                        <!-- è¿™é‡Œå°†æ’å…¥ç¬¬1å¼ å›¾ç‰‡ -->
                        <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='200' viewBox='0 0 400 200'%3E%3Crect width='400' height='200' fill='%23000'/%3E%3Crect y='20' width='400' height='40' fill='%23fff'/%3E%3Crect y='140' width='400' height='40' fill='%23fff'/%3E%3Ctext x='200' y='50' font-family='Arial' font-size='12' fill='%2307C160' text-anchor='middle'%3EOdoo WeChat QR Code Login%3C/text%3E%3Ctext x='200' y='70' font-family='Arial' font-size='10' fill='%2307C160' text-anchor='middle'%3Eå¾®ä¿¡æ‰«æäºŒç»´ç æˆæƒOdooç™»å½•%3C/text%3E%3Ctext x='30' y='180' font-family='Arial' font-size='8' fill='%23ccc' text-anchor='start'%3EDuodooTEKr IT / Apps%3C/text%3E%3Ctext x='370' y='35' font-family='Arial' font-size='14' fill='%23000' text-anchor='end'%3E18%3C/text%3E%3C/svg%3E" alt="Odooå¾®ä¿¡äºŒç»´ç ç™»å½•æ¨¡å—å®£ä¼ å›¾">
                    </div>
                </div>

                <div class="features">
                    <div class="feature-card">
                        <h4>äºŒç»´ç ç™»å½•</h4>
                        <p>ç”Ÿæˆå¾®ä¿¡äºŒç»´ç ï¼Œç”¨æˆ·ä½¿ç”¨å¾®ä¿¡æ‰«ä¸€æ‰«å³å¯å¿«é€Ÿç™»å½•ç³»ç»Ÿ</p>
                    </div>
                    <div class="feature-card">
                        <h4>ä¼šè¯ç®¡ç†</h4>
                        <p>å®Œæ•´çš„ä¼šè¯çŠ¶æ€ç®¡ç†ï¼Œæ”¯æŒå¾…æ‰«æã€å·²æ‰«æã€å·²ç¡®è®¤ã€å·²è¿‡æœŸå’Œå·²å–æ¶ˆçŠ¶æ€</p>
                    </div>
                    <div class="feature-card">
                        <h4>è‡ªåŠ¨ç”¨æˆ·åˆ›å»º</h4>
                        <p>æ”¯æŒé¦–æ¬¡æ‰«ç ç™»å½•æ—¶è‡ªåŠ¨åˆ›å»ºOdooç”¨æˆ·è´¦æˆ·ï¼Œå¹¶å¯é…ç½®é»˜è®¤æƒé™ç»„</p>
                    </div>
                    <div class="feature-card">
                        <h4>å¤šè®¾å¤‡é€‚é…</h4>
                        <p>å®Œç¾æ”¯æŒPCç«¯å’Œç§»åŠ¨ç«¯ï¼Œæä¾›ä¸€è‡´çš„ç”¨æˆ·ä½“éªŒ</p>
                    </div>
                </div>
            </div>

            <div class="section">
                <h2>ç•Œé¢å±•ç¤º</h2>
                <p>ä»¥ä¸‹æ˜¯å¾®ä¿¡äºŒç»´ç ç™»å½•æ¨¡å—åœ¨å®é™…Odooç³»ç»Ÿä¸­çš„ç•Œé¢å±•ç¤ºï¼š</p>

                <div class="image-gallery">
                    <div class="image-card">
                        <div class="image-description">
                            <h4>ä¼ ç»Ÿç™»å½•é¡µé¢</h4>
                            <p>åŒ…å«å¾®ä¿¡äºŒç»´ç ç™»å½•é€‰é¡¹çš„æ ‡å‡†ç™»å½•ç•Œé¢</p>
                        </div>
                        <!-- è¿™é‡Œå°†æ’å…¥ç¬¬2å¼ å›¾ç‰‡ -->
                        <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='300' viewBox='0 0 400 300'%3E%3Crect width='400' height='300' fill='%23f5f5f5'/%3E%3Crect y='50' width='400' height='40' fill='%23fff'/%3E%3Ctext x='200' y='75' font-family='Arial' font-size='12' fill='%23333' text-anchor='middle'%3Eç½‘ç«™é¦–é¡µ å…¬å¸ç®€ä»‹ æ–°é—»åŠ¨æ€%3C/text%3E%3Ctext x='350' y='75' font-family='Arial' font-size='12' fill='%23007bff' text-anchor='end'%3Eç™»å½•%3C/text%3E%3Crect x='50' y='120' width='300' height='40' fill='%23fff' stroke='%23ddd'/%3E%3Ctext x='70' y='145' font-family='Arial' font-size='12' fill='%23333' text-anchor='start'%3Eç”µå­é‚®ä»¶%3C/text%3E%3Crect x='50' y='170' width='300' height='40' fill='%23fff' stroke='%23ddd'/%3E%3Ctext x='70' y='195' font-family='Arial' font-size='12' fill='%23333' text-anchor='start'%3Eå¯†ç %3C/text%3E%3Crect x='50' y='220' width='300' height='40' fill='%23007bff'/%3E%3Ctext x='200' y='245' font-family='Arial' font-size='12' fill='%23fff' text-anchor='middle'%3Eç™»å½•%3C/text%3E%3Crect x='50' y='270' width='300' height='60' fill='%23f0e6d2'/%3E%3Ctext x='200' y='295' font-family='Arial' font-size='12' fill='%23333' text-anchor='middle'%3Eå¾®ä¿¡äºŒç»´ç ç™»å½•%3C/text%3E%3Ctext x='200' y='315' font-family='Arial' font-size='10' fill='%23333' text-anchor='middle'%3Eè¿˜æ²¡æœ‰è´¦æˆ·?%3C/text%3E%3C/svg%3E" alt="ä¼ ç»Ÿç™»å½•é¡µé¢">
                    </div>

                    <div class="image-card">
                        <div class="image-description">
                            <h4>å¾®ä¿¡æ‰«ç ç™»å½•ç•Œé¢</h4>
                            <p>ç”¨æˆ·æ‰«æäºŒç»´ç è¿›è¡Œç™»å½•çš„ä¸“ç”¨ç•Œé¢</p>
                        </div>
                        <!-- è¿™é‡Œå°†æ’å…¥ç¬¬3å¼ å›¾ç‰‡ -->
                        <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='350' viewBox='0 0 400 350'%3E%3Crect width='400' height='350' fill='%23f5f5f5'/%3E%3Crect y='50' width='400' height='40' fill='%23fff'/%3E%3Ctext x='200' y='75' font-family='Arial' font-size='12' fill='%23333' text-anchor='middle'%3Eç½‘ç«™é¦–é¡µ å…¬å¸ç®€ä»‹ æ–°é—»åŠ¨æ€%3C/text%3E%3Crect x='100' y='100' width='200' height='200' fill='%23fff' stroke='%2307C160' stroke-width='2'/%3E%3Crect x='150' y='150' width='100' height='100' fill='%23333'/%3E%3Ctext x='200' y='320' font-family='Arial' font-size='12' fill='%23333' text-anchor='middle'%3Eæ‰“å¼€å¾®ä¿¡æ‰«ä¸€æ‰«, å¿«é€Ÿç™»å½•%3C/text%3E%3Crect x='80' y='340' width='120' height='30' fill='%23ccc' rx='5'/%3E%3Ctext x='140' y='360' font-family='Arial' font-size='10' fill='%23333' text-anchor='middle'%3Eè¿”å›ç™»å½•é¡µé¢%3C/text%3E%3Crect x='220' y='340' width='120' height='30' fill='%2307C160' rx='5'/%3E%3Ctext x='280' y='360' font-family='Arial' font-size='10' fill='%23fff' text-anchor='middle'%3Eåˆ·æ–°äºŒç»´ç %3C/text%3E%3C/svg%3E" alt="å¾®ä¿¡æ‰«ç ç™»å½•ç•Œé¢">
                    </div>

                    <div class="image-card">
                        <div class="image-description">
                            <h4>æ‰«ç æˆåŠŸç•Œé¢</h4>
                            <p>ç”¨æˆ·æ‰«ç æˆåŠŸåç­‰å¾…è‡ªåŠ¨ç™»å½•çš„ç•Œé¢</p>
                        </div>
                        <!-- è¿™é‡Œå°†æ’å…¥ç¬¬4å¼ å›¾ç‰‡ -->
                        <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='350' viewBox='0 0 400 350'%3E%3Crect width='400' height='350' fill='%23f5f5f5'/%3E%3Crect y='50' width='400' height='40' fill='%23fff'/%3E%3Ctext x='200' y='75' font-family='Arial' font-size='12' fill='%23333' text-anchor='middle'%3Eç½‘ç«™é¦–é¡µ å…¬å¸ç®€ä»‹ æ–°é—»åŠ¨æ€%3C/text%3E%3Crect x='100' y='100' width='200' height='200' fill='%23fff' stroke='%2307C160' stroke-width='2'/%3E%3Crect x='150' y='150' width='100' height='100' fill='%23333'/%3E%3Ctext x='200' y='320' font-family='Arial' font-size='12' fill='%2307C160' text-anchor='middle'%3Eæ‰«ç æˆåŠŸï¼Œå³å°†è‡ªåŠ¨ç™»å½•%3C/text%3E%3Crect x='100' y='325' width='200' height='10' fill='%23e0e0e0' rx='5'/%3E%3Crect x='100' y='325' width='150' height='10' fill='%2307C160' rx='5'/%3E%3Ctext x='200' y='345' font-family='Arial' font-size='10' fill='%23333' text-anchor='middle'%3E3ç§’%3C/text%3E%3Crect x='50' y='350' width='100' height='30' fill='%23666' rx='5'/%3E%3Ctext x='100' y='370' font-family='Arial' font-size='10' fill='%23fff' text-anchor='middle'%3Eè¿”å›ç™»å½•é¡µé¢%3C/text%3E%3Crect x='160' y='350' width='100' height='30' fill='%2307C160' rx='5'/%3E%3Ctext x='210' y='370' font-family='Arial' font-size='10' fill='%23fff' text-anchor='middle'%3Eåˆ·æ–°äºŒç»´ç %3C/text%3E%3Crect x='270' y='350' width='100' height='30' fill='%2307C160' rx='5'/%3E%3Ctext x='320' y='370' font-family='Arial' font-size='10' fill='%23fff' text-anchor='middle'%3Eç«‹å³ç™»å½•%3C/text%3E%3C/svg%3E" alt="æ‰«ç æˆåŠŸç•Œé¢">
                    </div>
                </div>
            </div>

            <div class="section">
                <h2>æ ¸å¿ƒåŠŸèƒ½</h2>

                <h3>äºŒç»´ç ç”Ÿæˆä¸æ‰«æ</h3>
                <p>åŠ¨æ€ç”Ÿæˆå¾®ä¿¡ç™»å½•äºŒç»´ç ï¼Œç”¨æˆ·ä½¿ç”¨å¾®ä¿¡æ‰«ä¸€æ‰«åŠŸèƒ½è¿›è¡Œæ‰«æï¼š</p>
                <div class="code-block">
# äºŒç»´ç ç”Ÿæˆæ ¸å¿ƒä»£ç 
def wechat_login(self, **kwargs):
    # åˆ›å»ºæ–°çš„äºŒç»´ç ä¼šè¯
    session_id = request.env['wechat.qr.session'].sudo().create_session()

    # ç”Ÿæˆå¾®ä¿¡ç™»å½•URL
    base_url = request.env['ir.config_parameter'].sudo().get_param('web.base.url')
    redirect_uri = quote(f"{base_url}/wechat/qr/callback")

    # åˆ›å»ºäºŒç»´ç 
    qr = qrcode.QRCode(
        version=1,
        error_correction=qrcode.constants.ERROR_CORRECT_L,
        box_size=10,
        border=4,
    )
    qr.add_data(wechat_url)
    qr.make(fit=True)

    # ç”ŸæˆäºŒç»´ç å›¾åƒå¹¶è½¬æ¢ä¸ºbase64
    img = qr.make_image(fill_color="black", back_color="white")
    buffered = BytesIO()
    img.save(buffered, format="PNG")
    qr_img = base64.b64encode(buffered.getvalue()).decode()
                </div>

                <h3>ä¼šè¯çŠ¶æ€ç®¡ç†</h3>
                <p>å®Œæ•´çš„ä¼šè¯çŠ¶æ€ç®¡ç†æœºåˆ¶ï¼Œç¡®ä¿ç™»å½•è¿‡ç¨‹å®‰å…¨å¯æ§ï¼š</p>
                <table class="field-table">
                    <tr>
                        <th>çŠ¶æ€</th>
                        <th>æè¿°</th>
                        <th>åç»­åŠ¨ä½œ</th>
                    </tr>
                    <tr>
                        <td>pending</td>
                        <td>äºŒç»´ç å·²ç”Ÿæˆï¼Œç­‰å¾…ç”¨æˆ·æ‰«æ</td>
                        <td>ç”¨æˆ·æ‰«æåè½¬ä¸ºscannedçŠ¶æ€</td>
                    </tr>
                    <tr>
                        <td>scanned</td>
                        <td>ç”¨æˆ·å·²æ‰«æäºŒç»´ç ï¼Œç­‰å¾…ç¡®è®¤</td>
                       æç‹<td>ç”¨æˆ·ç¡®è®¤åè½¬ä¸ºconfirmedçŠ¶æ€</td>
                    </tr>
                    <tr>
                        <td>confirmed</td>
                        <td>ç”¨æˆ·å·²ç¡®è®¤ç™»å½•ï¼Œç™»å½•æˆåŠŸ</td>
                        <td>å®Œæˆç™»å½•æµç¨‹</td>
                    </tr>
                    <tr>
                        <td>expired</æç‹td>
                        <td>ä¼šè¯å·²è¿‡æœŸ</td>
                        <td>éœ€è¦é‡æ–°ç”ŸæˆäºŒç»´ç </td>
                    </tr>
                    <tr>
                        <td>canceled</td>
                        <td>ä¼šè¯å·²å–æ¶ˆ</td>
                        <td>éœ€è¦é‡æ–°ç”ŸæˆäºŒç»´ç </td>
                    </tr>
                </table>

                <h3>ç”¨æˆ·è‡ªåŠ¨åˆ›å»ºä¸ç™»å½•</h3>
                <p>æ™ºèƒ½è¯†åˆ«ç”¨æˆ·ä¿¡æ¯å¹¶è‡ªåŠ¨åˆ›å»ºOdooè´¦æˆ·ï¼š</p>
                <div class="code-block">
def _find_or_create_user(self, wechat_user_info, config):
    """æŸ¥æ‰¾æˆ–åˆ›å»ºç”¨æˆ·"""
    # ä¿®å¤æ˜µç§°ç¼–ç 
    fixed_nickname = request.env['æç‹res.users'].fix_wechat_nickname(
        wechat_user_info.get('nickname')
    )

    openid = wechat_user_info.get('openid')
    unionid = wechat_user_info.get('unionid')
    login_name = f"wechat_{openid}"

    # é¦–å…ˆå°è¯•é€šè¿‡openidæŸ¥æ‰¾ç”¨æˆ·
    user = request.env['res.users'].sudo().search([
        ('wechat_openid', '=', openid)
    ], limit=1)

    if user:
        return user

    # å¦‚æœé…ç½®å…è®¸è‡ªåŠ¨åˆ›å»ºç”¨æˆ·ï¼Œåˆ™åˆ›å»ºæ–°ç”¨æˆ·
    if config.auto_create_user:
        portal_user = request.env['res.users'].sudo().create({
            'name': fixed_nickname or f"å¾®ä¿¡ç”¨æˆ·_{openid[:8]}",
            'login': login_name,
            'password': str(uuid.uuid4()),  # éšæœºå¯†ç 
            'wechat_openid': openid,
            'wechat_unionid': unionid,
            'wechat_nickname': fixed_nickname,
            'groups_id': [(6, 0, [request.env.ref('base.group_portal').id])]
        })
        return portal_user
                </div>
            </div>

            <div class="section">
                <h2>é…ç½®è¯´æ˜</h2>

                <h3>å¾®ä¿¡æœåŠ¡å·é…ç½®</h3>
                <p>åœ¨ä½¿ç”¨æœ¬æ¨¡å—å‰ï¼Œéœ€è¦å…ˆé…ç½®å¾®ä¿¡æœåŠ¡å·ç›¸å…³ä¿¡æ¯ï¼š</p>
                <table class="field-table">
                    <tr>
                        <th>å‚æ•°</th>
                        <th>è¯´æ˜</th>
                        <th>å¿…å¡«</th>
                    </tr>
                    <tr>
                        <td>App ID</td>
                        <td>å¾®ä¿¡å¼€å‘è€…åå°çš„AppID</td>
                        <td>æ˜¯</td>
                    </tr>
                    <tr>
                        <td>App Secret</td>
                        <td>å¾®ä¿¡å¼€å‘è€…åå°çš„AppSecret</td>
                        <td>æç‹æ˜¯</td>
                    </tr>
                    <tr>
                        <td>æˆæƒèŒƒå›´</td>
                        <td>snsapi_base(é™é»˜æˆæƒ)æˆ–snsapi_userinfo(ç”¨æˆ·ä¿¡æ¯æˆæƒ)</td>
                        <td>æ˜¯</td>
                    </tr>
                    <tr>
                        <td>è‡ªåŠ¨åˆ›å»ºç”¨æˆ·</td>
                        <td>æ˜¯å¦å…è®¸é¦–æ¬¡ç™»å½•æ—¶è‡ªåŠ¨åˆ›å»ºç”¨æˆ·</td>
                        <td>å¦</td>
                    </tr>
                    <tr>
                        <td>é»˜è®¤ç”¨æˆ·ç»„</td>
                        <td>è‡ªåŠ¨åˆ›å»ºç”¨æˆ·æ—¶åˆ†é…çš„æƒé™æç‹ç»„</td>
                        <td>å¦</æç‹td>
                    </tr>
                </table>

                <h3>å›è°ƒURLé…ç½®</h3>
                <p>åœ¨å¾®ä¿¡å¼€æ”¾å¹³å°ä¸­é…ç½®æˆæƒå›è°ƒåŸŸåä¸ºï¼š</p>
                <div class="code-block">
# æ ¼å¼ä¸ºï¼šhttps://ä½ çš„odooåŸŸå/wechat/qr/callback
https://your-odoo-domain.com/wechat/qr/callback
                </div>
            </div>

            <div class="section">
                <h2>APIç«¯ç‚¹</h2>

                <div class="endpoints">
                    <div class="endpoint">
                        <span class="endpoint-method">GET</span>
                        <strong>/wechat/qr/login</strong>
                        <p>ç”Ÿæˆå¾®ä¿¡ç™»å½•äºŒç»´ç é¡µé¢</p>
                    </div>
                    <div class="endpoint">
                        <span class="endpoint-method">GET</span>
                        <strong>/wechat/qr/callback</strong>
                        <p>å¾®ä¿¡æˆæƒå›è°ƒæ¥å£ï¼Œå¤„ç†ç”¨æˆ·æˆæƒåçš„è·³è½¬å’Œç”¨æˆ·ä¿¡æ¯è·å–</p>
                    </div>
                    <div class="endpoint">
                        <span class="endpoint-method">POST</span>
                        <strong>/wechat/qr/status</strong>
                        <p>æ£€æŸ¥äºŒç»´ç ç™»å½•çŠ¶æ€ï¼Œè¿”å›å½“å‰ä¼šè¯çŠ¶æ€</æç‹p>
                    </div>
                    <div class="endpoint">
                        <span class="endpoint-method">GET</span>
                        <strong>/wechat/qr/do_login</strong>
                        <p>ä½¿ç”¨ä»¤ç‰Œæ‰§è¡Œç™»å½•æ“ä½œ</p>
                    </div>
                </div>
            </div>

            <div class="section">
                <h2>å®‰è£…ä¸éƒ¨ç½²</h2>

                <h3>ä¾èµ–æ¨¡å—</h3>
                <ul>
                    <li>base</li>
                    <li>web</li>
                    <li>website</li>
                    <li>auth_oauth</li>
                    <li>oudu_wechat_login</li>
                </ul>

                <h3>å®‰è£…æ­¥éª¤</h3>
                <ol>
                    <li>å°†æ¨¡å—æ·»åŠ åˆ°Odooçš„addonsç›®å½•</li>
                    <li>åœ¨Odooåº”ç”¨ä¸­å®‰è£…"Odoo WeChat QRCode Login"æ¨¡å—</li>
                    <li>ç¡®ä¿å·²å®‰è£…å¹¶é…ç½®åŸºç¡€çš„oudu_wechat_loginæ¨¡å—</li>
                    <li>åœ¨å¾®ä¿¡å¼€æ”¾å¹³å°é…ç½®æˆæƒå›è°ƒåŸŸå</li>
                    <li>å¯ç”¨é…ç½®å¹¶æµ‹è¯•äºŒç»´ç ç™»å½•åŠŸèƒ½</li>
                </ol>

                <h3>å®šæ—¶ä»»åŠ¡é…ç½®</h3>
                <p>æ¨¡å—æä¾›äº†å®šæ—¶æ¸…ç†è¿‡æœŸä¼šè¯çš„åŠŸèƒ½ï¼Œéœ€è¦åœ¨Odooä¸­é…ç½®å®šæ—¶ä»»åŠ¡ï¼š</p>
                <div class="code-block">
# å®šæ—¶ä»»åŠ¡æ–¹æ³•
def cleanup_expired_sessions(self):
    """æ¸…ç†è¿‡æœŸä¼šè¯çš„å®šæ—¶ä»»åŠ¡"""
    expiry_date = fields.Datetime.to_string(datetime.now() - timedelta(days=1))
    expired_sessions = self.search([('create_date', '<', expiry_date)])
    if expired_sessions:
        expired_sessions.unlink()
        _logger.info("Cleaned up %d expired WeChat QR sessions", len(expired_sessions))
                </div>
            </div>

            <div class="author-info">
                <h3>æ¨¡å—ä¿¡æ¯</h3>
                <p><strong>åç§°ï¼š</strong>Odoo WeChat QRCode Login</p>
                <p><strong>ç‰ˆæœ¬ï¼š</strong>18.0.2.0</p>
                <p><strong>ä½œè€…ï¼š</strong>DuodooTEKrå¤šåº¦ç§‘æŠ€</p>
                <p><strong>ç½‘ç«™ï¼š</strong>http://www.duodoo.tech</p>
                <p><strong>ä»·æ ¼ï¼š</strong>29.99 USD</p>
                <p><strong>è®¸å¯è¯ï¼š</strong>AGPL-3</p>
            </div>
        </div>

        <footer>
            <p>Â© 2025 Odooå¾®ä¿¡äºŒç»´ç ç™»å½•æ¨¡å— | ç”±DuodooTEKrå¤šåº¦ç§‘æŠ€å¼€å‘</p>
        </footer>
    </div>
</body>
</html>